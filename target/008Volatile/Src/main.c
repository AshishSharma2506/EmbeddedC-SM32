/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */
// video 147
// to understand the volatile keyword effect

#include <stdint.h>

#if !defined(__SOFT_FP__) && defined(__ARM_FP)
  #warning "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use."
#endif



int main(void)
{
    uint8_t volatile data1;
    uint8_t volatile data2;

    data1 = 50;

    data2 = data1;
    // same code once again
    data2 = data1;// redundant C statement , compiler would generate inst for only the above statement
    // and igore this one. Optimization to decrease instruction

    /*
     we see the compiler will generate instructions for both line 36 and 38 in O0 optimization
	in O1 compiler removed all instructions and only kept the statement 46 for(;;)
	all other statements are not execute!!
	WHY?
	this is because we have created variables but not used them in the program anywhere at all.
	So compiler did not generate any instructions for them

	SO how to tell the compiler to generate inst for these statements?
	using VOLATILE keyword
     */
    /*
     now compiler does not reomove the vars or optimize them when using the keyword 'volatile'
     */

	for(;;);
}
